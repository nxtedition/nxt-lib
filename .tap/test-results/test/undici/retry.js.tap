TAP version 14
# Subtest: retry status
    1..3
    not ok 1 - Cannot read properties of undefined (reading 'content-length')
      ---
      stack: |
        request (lib/undici/index.js:105:22)
        Server.<anonymous> (test/undici/retry.js:17:24)
      at:
        fileName: lib/undici/index.js
        lineNumber: 105
        columnNumber: 22
        functionName: request
      type: TypeError
      tapCaught: unhandledRejection
      source: |2
          if (
            (method === 'HEAD' || method === 'GET') &&
            (parseInt(headers['content-length']) > 0 || headers['transfer-encoding'])
        ---------------------^
          ) {
            throw new createError.BadRequest('HEAD and GET cannot have body')
      ...
    
    not ok 2 - test count(1) != plan(3)
      ---
      at:
        fileName: test/undici/retry.js
        lineNumber: 6
        columnNumber: 5
        typeName: Test
      source: |
      
        test('retry status', (t) => {
          t.plan(3)
        ----^
      
          let x = 0
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -3
        +1
      ...
    
    # test count(2) != plan(3)
not ok 1 - retry status # time=27.801ms
  ---
  at:
    fileName: test/undici/retry.js
    lineNumber: 5
    columnNumber: 1
    typeName: Object
  source: |
    const { request } = require('../../lib/undici/index.js')
  
    test('retry status', (t) => {
    ^
      t.plan(3)
  ...

# Subtest: retry destroy pre response
    1..3
    not ok 1 - Cannot read properties of undefined (reading 'content-length')
      ---
      stack: |
        request (lib/undici/index.js:105:22)
        Server.<anonymous> (test/undici/retry.js:38:24)
      at:
        fileName: lib/undici/index.js
        lineNumber: 105
        columnNumber: 22
        functionName: request
      type: TypeError
      tapCaught: unhandledRejection
      source: |2
          if (
            (method === 'HEAD' || method === 'GET') &&
            (parseInt(headers['content-length']) > 0 || headers['transfer-encoding'])
        ---------------------^
          ) {
            throw new createError.BadRequest('HEAD and GET cannot have body')
      ...
    
    not ok 2 - test count(1) != plan(3)
      ---
      at:
        fileName: test/undici/retry.js
        lineNumber: 24
        columnNumber: 5
        typeName: Test
      source: |
      
        test('retry destroy pre response', (t) => {
          t.plan(3)
        ----^
      
          let x = 0
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -3
        +1
      ...
    
    # test count(2) != plan(3)
not ok 2 - retry destroy pre response # time=5.509ms
  ---
  at:
    fileName: test/undici/retry.js
    lineNumber: 23
    columnNumber: 1
    typeName: Object
  source: |
    })
  
    test('retry destroy pre response', (t) => {
    ^
      t.plan(3)
  ...

# Subtest: retry destroy post response
    1..4
    not ok 1 - Cannot read properties of undefined (reading 'content-length')
      ---
      stack: |
        request (lib/undici/index.js:105:22)
        Server.<anonymous> (test/undici/retry.js:68:24)
      at:
        fileName: lib/undici/index.js
        lineNumber: 105
        columnNumber: 22
        functionName: request
      type: TypeError
      tapCaught: unhandledRejection
      source: |2
          if (
            (method === 'HEAD' || method === 'GET') &&
            (parseInt(headers['content-length']) > 0 || headers['transfer-encoding'])
        ---------------------^
          ) {
            throw new createError.BadRequest('HEAD and GET cannot have body')
      ...
    
    not ok 2 - test count(1) != plan(4)
      ---
      at:
        fileName: test/undici/retry.js
        lineNumber: 45
        columnNumber: 5
        typeName: Test
      source: |
      
        test('retry destroy post response', (t) => {
          t.plan(4)
        ----^
      
          let x = 0
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -4
        +1
      ...
    
    # test count(2) != plan(4)
not ok 3 - retry destroy post response # time=4.307ms
  ---
  at:
    fileName: test/undici/retry.js
    lineNumber: 44
    columnNumber: 1
    typeName: Object
  source: |
    })
  
    test('retry destroy post response', (t) => {
    ^
      t.plan(4)
  ...

1..3
